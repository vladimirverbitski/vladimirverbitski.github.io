(this["webpackJsonpavito-tech"]=this["webpackJsonpavito-tech"]||[]).push([[0],{38:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){},66:function(e,n,t){},67:function(e,n,t){},70:function(e,n,t){},71:function(e,n,t){},72:function(e,n,t){},73:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t.n(c),i=t(17),s=t.n(i),a=(t(38),t(39),t(40),t(3)),o=t(11),u=t(33),l=(t(41),t(10)),d=t.n(l),j=t(15),f=t(12),b=t(16),m=t.n(b),A=t(23),O="https://hacker-news.firebaseio.com/v0",h=function(){return U(),m.a.get("".concat(O,"/topstories.json")).then((function(e){return e.data})).then((function(e){var n=e.slice(0,100).map((function(e){return m.a.get("".concat(O,"/item/").concat(e,".json")).then((function(e){return e.data}))}));return Promise.all(n).then((function(e){return I(),function(e){return e.sort((function(e,n){return new Date(n.time).valueOf()-new Date(e.time).valueOf()}))}(e)}))}))},w=function(e){return U(),m.a.get("".concat(O,"/item/").concat(e,".json")).then((function(e){return I(),e.data}))},v=function(e){var n=e.map((function(e){return m.a.get("".concat(O,"/item/").concat(e,".json")).then((function(e){return e.data}))}));return Promise.all(n).then((function(e){return e.map((function(e){return function(e){return Object(A.a)(Object(A.a)({},e),{},{replies:[]})}(e)}))}))},x=t(9),g=Object(f.b)("news/fetchNews",Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),p=Object(f.b)("news/fetchNewsItem",function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w(n));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),N=Object(f.b)("news/fetchNewsComments",function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(n));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),C=Object(f.b)("news/fetchCommentReplies",function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(n));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),k=Object(f.c)({name:"app",initialState:{loading:!1,newsList:[],newsItem:null,newsComments:[],error:null},reducers:{loading:function(e,n){e.loading=n.payload},commentUpdate:function(e,n){console.log(n.payload);var t=n.payload,c=t.commentId,r=t.replies,i=e.newsComments.find((function(e){return c===e.id}));i&&(i.replies=r),console.log(i)}},extraReducers:function(e){e.addCase(g.fulfilled,(function(e,n){e.newsList=n.payload})).addCase(p.fulfilled,(function(e,n){e.newsItem=n.payload})).addCase(N.fulfilled,(function(e,n){e.newsComments=n.payload}))}}),B=function(e){return e.newsList},D=function(e){return e.newsItem},y=function(e){return e.newsComments},I=function(){return V.dispatch(Q(!0))},U=function(){return V.dispatch(Q(!1))},E=function(){return Object(x.b)()},R=k.actions,Q=R.loading,F=R.commentUpdate,V=Object(f.a)({reducer:k.reducer}),S=t(1);function K(e){var n,t,r=e.comment,i=Object(c.useState)(!1),s=Object(u.a)(i,2),a=s[0],o=s[1],l=E(),d=function(){l(C(r.kids)).then((function(e){var n={commentId:r.id,replies:e.payload};l(F(n))}))};return Object(S.jsxs)("div",{className:"comment-block",children:[Object(S.jsx)("div",{className:"news-info__author",children:r.deleted?"unknown":r.by}),r.deleted?Object(S.jsx)("div",{className:"comment-text",children:Object(S.jsx)("i",{children:Object(S.jsx)("s",{children:"deleted"})})}):Object(S.jsx)("div",{className:"comment-text",dangerouslySetInnerHTML:{__html:r.text}}),(null===r||void 0===r||null===(n=r.kids)||void 0===n?void 0:n.length)>0?Object(S.jsxs)("button",{className:"replies-button",onClick:function(){a?o(!1):(d(),o(!0))},children:[a?"hide":"show"," replies (",null===r||void 0===r||null===(t=r.kids)||void 0===t?void 0:t.length,")"]}):"",a?Object(S.jsx)("div",{className:"replies-container",children:r.replies.map((function(e){return Object(S.jsx)(K,{comment:e},e.id)}))}):""]})}t(66);function Y(){return Object(S.jsx)("div",{className:"preloader",children:Object(S.jsx)("div",{className:"lds-dual-ring"})})}var L=t(75);function z(e){return Object(L.a)(new Date(1e3*e),"dd MMM yyyy HH:mm")}t(67);function H(){var e=Object(a.f)().id,n=Object(x.c)((function(e){return e.loading})),t=Object(x.c)(D),r=Object(x.c)(y),i=E();Object(c.useEffect)((function(){s(Number(e))}),[i]);var s=function(e){i(p(Number(e))).then((function(e){e.payload.kids&&i(N(e.payload.kids))}))};return n?Object(S.jsx)(S.Fragment,{children:t?Object(S.jsxs)("div",{className:"news-detail-container",children:[Object(S.jsx)("div",{className:"back-button",children:Object(S.jsx)(o.b,{to:"/",children:Object(S.jsx)("button",{className:"btn-default",children:"Back"})})}),Object(S.jsxs)("div",{className:"detail-info",children:[Object(S.jsx)("div",{className:"news-info__author",children:t.by}),Object(S.jsx)("div",{className:"news-date",children:z(t.time)}),Object(S.jsxs)("div",{className:"news-info-comments",children:[Object(S.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAl0lEQVRIiWNgGAUkAA8GBobHDAwM/ynEDxkYGNywWfCICobD8H1sFsAkKQHMUDP+wASYKDSQIKC5BSwE5IkNMkZcEtT2AYaDCPkAp8uI1Teo44Ao3w3ZOICDIZvRsKaix1Ca3ALuNwMDQzg+Wz0YKC9R/0Dpf6R7mjAoR7KIJhYgW0IzC2CWwC1gpoEFRxkgqegADczGBADWA1owfhpmmQAAAABJRU5ErkJggg==",alt:"comments"}),t.descendants]})]}),Object(S.jsx)("div",{className:"news-title",children:Object(S.jsx)("h1",{children:t.title})}),Object(S.jsx)("div",{className:"news-link",children:Object(S.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",children:t.url})}),Object(S.jsxs)("div",{className:"news-comments",children:[Object(S.jsxs)("div",{className:"news-comments-header",children:[Object(S.jsx)("button",{className:"update-replies",onClick:function(){i(N(t.kids))},children:Object(S.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAADDUlEQVRIie2WQWhUVxSGv3PvxLUtSSUkCNIgLkSNkzErl9p5A9OgEwU7ziRZSQ1CEUpXpZCdiHYVsXQRM5NScBpSE5lRV110M00GacBNEhHU2oZI0k2hzZv3ThczymQyTpw4uvJf3Xfv/+53zuXd8w681zuSvK4xGE3ulqKeBDkGug9kF4DCM4ElICuevTV7b+xJU8DBaHK3KTKi8BnQsoXdFWUc345sFUBdcI+T7Ae+B3YCrkBGVW6Ltfn/XHcZICDabsSGED4FjZWD+1vQ5GwuPdMwOPjJ2XYx5ilgQCc1IBcLM6nH9QI9cjyxx7dcBokBqqLnC9n09UYzllA4MaJiFudy46l6wGr1OIkvQK4CvuL3F3ITPzcCfiMFI8mLolwBVj3svvu5sZXKdfO2wIVs6iowDXxo8S5Vr28AB8OJU8Fw4lSz4BrgAuAC8W5nqK0muNsZahORUREZrTZtV6WPUaeBHZZivCY4IP4o0Aa0lcfNkZpJAESObgKHIgOnVfXlEatq047cGC2UNuVA5bwEo2daTbHlgcJHVe88ty3u/vz0j8vbAYYiAzcrk6mUKjeN8XZcqwEFaPXWW77bDhTAt+vnQWoF/dz19cKGe9zjJJeAj601e/O3byxuF/pyv0iyD2VD8VDV04U76cyG66QwD+B7/uE3hQLMZVO3RCTz4llEMoU76QxUFxDh17Ij1gwwQFHNMLACrJTHbAK7RZ0AXFXt63Xinc0A38+NrajqsKoOV5bNTbU6GBkYE9VBhalCLnWyGfBa2lSr3aL/lcCawInSX+btyFZPLD+c/6ez6+CCCv0g4fauQ2t/Lv2eb2TTUDgx2NF1MPZsaf6XV3le3Qg4A58LOlry6KTx+PK3e+lH9YBHjif2+Ea+RegDfBHTMZu98VdDYICQk4iCjCt8ALggkyo6Y2Hu36L+AaXWxxrbq2gUiAEBYBU4N5dL/dRwxi/U68Q7PczXIENs3eytAxMW75t87oen9Yyv3YH0OvFOT0wfKhGgC+iAcnsrLKhyN4A3tRXwvd65/gewKCYonNMbzQAAAABJRU5ErkJggg==",alt:"refresh"})}),Object(S.jsx)("h3",{children:"Comments:"})]}),r?r.map((function(e){return Object(S.jsx)(K,{comment:e},e.id)})):""]})]}):""}):Object(S.jsx)(Y,{})}t(70);function T(e){var n=e.item;return Object(S.jsxs)("div",{className:"news-card",children:[Object(S.jsx)("div",{className:"news-info",children:Object(S.jsxs)("div",{className:"news-info-left",children:[Object(S.jsx)("div",{className:"news-info__author",children:n.by}),Object(S.jsx)("div",{className:"news-info__date",children:z(n.time)}),Object(S.jsxs)("div",{className:"news-info-rating",children:[Object(S.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABgklEQVRIie2UPUvDYBSFn5vGDxSNCYiDVcHFwVWXNjr7E1ychPqx+F8c6yI4+A/EzcEqboofo0uLDmKN0c02uQ62kMa2aatuHngh78k953Dfm7zwjwRIdOOfjq4IsqdCuke/Eqo5a+ntuE4YjXGS/4E5wBQi+ShhfisALNcXeoBfsLTuUYfRorYpyhdOunzhdNVhVwF91WDLrASbfxKgRwworCPk9ITBXw94H7XWgAlg3O+31lQ70zZ+pl9DwnJ9eSnY0ynVQ0RngXEgFdOGwDNwH2CsOq5XjOoTO3Bcr2gYsgF8NDGvabUaimw7rlds5dO2zZGsd9tnmBmFm/g7gWuT/kU7+3rVziPxHIcy5QcRbuO8CnfD7vNjkr6zISvZ2tNTbUW5nwV4Z2MzQBqRA6mE82FF5lDZBSZfCvZ0kj5+VXyDBmKFJgt25vUyQu9452P7EqgNtBxwRwHOsnfdjI8FtkRXV0UviHdQAqbqP0yPKEU3jR2o5uIFXZt/efyjc3wCyuJ29coeCyIAAAAASUVORK5CYII=",alt:""}),n.score]})]})}),Object(S.jsx)("div",{className:"news-title",children:Object(S.jsx)("h2",{children:Object(S.jsx)(o.b,{to:{pathname:"/news/".concat(n.id)},children:n.title})})})]})}t(71);function X(){var e=Object(x.c)((function(e){return e.loading})),n=Object(x.b)(),t=Object(x.c)(B);Object(c.useEffect)((function(){r()}),[n]),function(e,n){var t=Object(c.useRef)();Object(c.useEffect)((function(){t.current=e}),[e]),Object(c.useEffect)((function(){if(null!==n){var e=setInterval((function(){t.current()}),n);return function(){return clearInterval(e)}}}),[n])}((function(){r()}),6e4);var r=function(){n(g())};return e?Object(S.jsxs)("div",{className:"news-list-container",children:[Object(S.jsx)("div",{className:"action-bar",children:Object(S.jsx)("button",{className:"btn-default",onClick:r,children:"Update"})}),t.map((function(e){return Object(S.jsx)(T,{item:e},e.id)}))]}):Object(S.jsx)(Y,{})}function Z(){return Object(S.jsxs)(a.c,{children:[Object(S.jsx)(a.a,{exact:!0,path:"/",component:X}),Object(S.jsx)(a.a,{exact:!0,path:"/news/:id",component:H})]})}t(72);function P(e){return Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("div",{className:"nav-bar",children:Object(S.jsx)("div",{className:"nav-bar-title",children:Object(S.jsx)(o.b,{to:"/",children:e.title})})}),Object(S.jsx)("div",{className:"content",children:e.children})]})}var G=function(){return Object(S.jsx)(x.a,{store:V,children:Object(S.jsx)(o.a,{children:Object(S.jsx)(P,{title:"Hacker News",children:Object(S.jsx)(Z,{})})})})},M=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,76)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,i=n.getLCP,s=n.getTTFB;t(e),c(e),r(e),i(e),s(e)}))};s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(G,{})}),document.getElementById("root")),M()}},[[73,1,2]]]);
//# sourceMappingURL=main.2891a6a6.chunk.js.map